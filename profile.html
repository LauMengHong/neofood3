<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoFood - Profile</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/profile.css">
    <link rel="stylesheet" href="styles/address.css">
    <link rel="stylesheet" href="styles/copyright.css">
    <link rel="stylesheet" href="styles/profile-modal.css">
    <link rel="stylesheet" href="styles/notifications.css">
    <style>
    /* Favorites styles */
    .favorites-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .favorite-card {
        padding: 20px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        transition: all 0.3s ease;
    }

    .favorite-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .favorite-icon {
        font-size: 2.5rem;
        background: rgba(0, 245, 255, 0.1);
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
    }

    .favorite-info {
        flex: 1;
    }

    .favorite-info h3 {
        margin: 0 0 5px;
        color: var(--text-light);
    }

    .favorite-info p {
        margin: 0 0 5px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
    }

    .favorite-rating {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.9rem;
    }

    .favorite-rating .stars {
        color: gold;
    }

    .favorite-actions {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .order-btn {
        background: var(--neon-blue);
        color: black;
        border: none;
        border-radius: 8px;
        padding: 8px 15px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .order-btn:hover {
        background: white;
        box-shadow: 0 0 10px var(--neon-blue);
    }

    .remove-favorite-btn {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .remove-favorite-btn:hover {
        transform: scale(1.2);
    }

    .heart-icon {
        transition: all 0.3s ease;
    }

    .remove-favorite-btn:hover .heart-icon {
        filter: brightness(0.8);
    }

    .no-favorites {
        grid-column: 1 / -1;
        text-align: center;
        padding: 40px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.1rem;
    }
    </style>
    <script src="scripts/theme-loader.js"></script>
</head>
<body>
    <div class="cursor-glow"></div>
    
    <nav class="floating-nav">
        <div class="nav-brand">NeoFood</div>
        <div class="nav-links">
            <a href="home.html" class="nav-link">Home</a>
            <a href="orders.html" class="nav-link">Orders</a>
            <a href="#" class="nav-link" id="logoutBtn">Logout</a>
        </div>
    </nav>

    <section class="profile-section">
        <div class="profile-container">
            <div class="profile-header glass">
                <div class="profile-avatar">
                    <div class="avatar-icon">üë§</div>
                </div>
                <div class="profile-info">
                    <h1 id="userName">Neo User</h1>
                    <p id="userEmail">user@neofood.com</p>
                    <div class="user-stats">
                        <div class="stat">
                            <span class="stat-number" id="totalOrders">0</span>
                            <span class="stat-label">Orders</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="totalSpent">$0</span>
                            <span class="stat-label">Spent</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="favoriteRestaurants">0</span>
                            <span class="stat-label">Favorites</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-content">
                <div class="profile-tabs">
                    <div class="tab active" data-tab="orders">Recent Orders</div>
                    <div class="tab" data-tab="favorites">Favorites</div>
                    <div class="tab" data-tab="settings">Settings</div>
                </div>
                
                <div class="tab-content">
                    <div class="tab-panel active" id="orders-panel">
                        <div class="recent-orders" id="recentOrders">
                            <!-- Orders loaded dynamically -->
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="favorites-panel">
                        <div class="favorites-grid" id="favoritesGrid">
                            <!-- Favorites loaded dynamically -->
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="settings-panel">
                        <div class="settings-section glass">
                            <h3>üé® Theme</h3>
                            <div class="theme-selector">
                                <div class="theme-option active" data-theme="dark">
                                    <div class="theme-preview dark-theme"></div>
                                    <span>Dark</span>
                                </div>
                                <div class="theme-option" data-theme="light">
                                    <div class="theme-preview light-theme"></div>
                                    <span>Light</span>
                                </div>
                                <div class="theme-option" data-theme="neon">
                                    <div class="theme-preview neon-theme"></div>
                                    <span>Neon</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-section glass">
                            <h3>üîî Notifications</h3>
                            <div class="setting-item">
                                <span>Order Updates</span>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <span>Promotions</span>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-section glass">
                            <h3>üìç Delivery Addresses</h3>
                            <div id="addressContainer">
                                <div class="address-card glass default">
                                    <div class="address-header">
                                        <div class="address-name">Home</div>
                                        <div class="default-badge">Default</div>
                                    </div>
                                    <div class="address-content">
                                        <div class="address-text">123 Cyber Street, Neo City</div>
                                        <div class="address-instructions">Ring doorbell twice</div>
                                    </div>
                                </div>
                            </div>
                            <button id="addAddressBtn" class="add-address-btn">
                                + Add New Address
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="scripts/main.js"></script>
    <script src="scripts/theme-system.js"></script>
    <script src="scripts/fix-order-history.js"></script>
    <script src="scripts/direct-auth.js"></script>
    <script src="scripts/fix-profile-logout.js"></script>
    <script src="scripts/profile-tabs.js"></script>
    <script src="scripts/profile-settings.js"></script>
    <script src="scripts/user-notifications.js"></script>
    <script src="scripts/copyright-remover.js"></script>
    <script>
    // Initialize user with favorites
    document.addEventListener('DOMContentLoaded', function() {
      // Make sure we have restaurant data
      initDefaultRestaurants();
      
      // Initialize user with favorites
      initUserWithFavorites();
      
      // Display favorites
      displayFavorites();
      
      // Setup favorites tab
      setupFavoritesTab();
    });
    
    // Initialize default restaurants
    function initDefaultRestaurants() {
      if (!localStorage.getItem('neoFoodRestaurants')) {
        const defaultRestaurants = [
          {
            id: 'restaurant-1',
            name: 'Cyber Sushi',
            cuisine: 'Japanese',
            icon: 'üç£',
            rating: 4.8
          },
          {
            id: 'restaurant-2',
            name: 'Neon Pizza',
            cuisine: 'Italian',
            icon: 'üçï',
            rating: 4.7
          },
          {
            id: 'restaurant-3',
            name: 'Digital Greens',
            cuisine: 'Healthy',
            icon: 'ü•ó',
            rating: 4.9
          }
        ];
        localStorage.setItem('neoFoodRestaurants', JSON.stringify(defaultRestaurants));
      }
    }
    
    // Initialize user with favorites
    function initUserWithFavorites() {
      // Get current user
      const user = JSON.parse(localStorage.getItem('neoFoodCurrentUser') || '{}');
      
      // Make sure user has an ID
      if (!user.id) {
        user.id = 'user-' + Date.now();
        user.name = 'Neo User';
        user.email = 'user@neofood.com';
      }
      
      // Initialize favorites if not present
      if (!user.favorites) {
        user.favorites = ['restaurant-1', 'restaurant-2', 'restaurant-3'];
      }
      
      // Save user
      localStorage.setItem('neoFoodCurrentUser', JSON.stringify(user));
      
      // Update favorites count
      const favCount = document.getElementById('favoriteRestaurants');
      if (favCount) {
        favCount.textContent = user.favorites.length;
      }
    }
    
    // Setup favorites tab
    function setupFavoritesTab() {
      const favTab = document.querySelector('.tab[data-tab="favorites"]');
      if (favTab) {
        favTab.addEventListener('click', function() {
          // Remove active class from all tabs and panels
          document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
          document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
          
          // Add active class to favorites tab and panel
          this.classList.add('active');
          document.getElementById('favorites-panel').classList.add('active');
          
          // Make sure favorites are displayed
          displayFavorites();
        });
      }
    }
    
    // Display favorites
    function displayFavorites() {
      const favoritesGrid = document.getElementById('favoritesGrid');
      if (!favoritesGrid) return;
      
      const currentUser = JSON.parse(localStorage.getItem('neoFoodCurrentUser') || '{}');
      const favorites = currentUser.favorites || [];
      const restaurants = JSON.parse(localStorage.getItem('neoFoodRestaurants') || '[]');
      
      favoritesGrid.innerHTML = '';
      
      if (favorites.length === 0) {
        favoritesGrid.innerHTML = '<div class="no-favorites">No favorite restaurants yet</div>';
        return;
      }
      
      favorites.forEach(id => {
        const restaurant = restaurants.find(r => r.id === id);
        if (!restaurant) return;
        
        const restaurantNumber = restaurant.id.split('-')[1];
        
        const card = document.createElement('div');
        card.className = 'favorite-card glass';
        card.innerHTML = `
          <div class="favorite-icon">${restaurant.icon}</div>
          <div class="favorite-info">
            <h3>${restaurant.name}</h3>
            <p>${restaurant.cuisine}</p>
            <div class="favorite-rating">
              <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
              <span>${restaurant.rating}</span>
            </div>
          </div>
          <div class="favorite-actions">
            <button class="order-btn" onclick="window.location.href='restaurant-${restaurantNumber}.html'">Order</button>
            <button class="remove-btn" data-id="${restaurant.id}">‚ùå</button>
          </div>
        `;
        
        favoritesGrid.appendChild(card);
        
        // Add remove functionality
        const removeBtn = card.querySelector('.remove-btn');
        removeBtn.addEventListener('click', function() {
          const id = this.getAttribute('data-id');
          const user = JSON.parse(localStorage.getItem('neoFoodCurrentUser') || '{}');
          user.favorites = (user.favorites || []).filter(fav => fav !== id);
          localStorage.setItem('neoFoodCurrentUser', JSON.stringify(user));
          
          // Update count
          const favCount = document.getElementById('favoriteRestaurants');
          if (favCount) favCount.textContent = user.favorites.length;
          
          // Remove card
          card.remove();
          
          // Show empty message if needed
          if (user.favorites.length === 0) {
            favoritesGrid.innerHTML = '<div class="no-favorites">No favorite restaurants yet</div>';
          }
        });
      });
    }
    </script>
    </script>
</body>
</html>